# SNES LoROM Multi-Bank Linker Configuration
# For use with ca65/ld65
#
# Supports up to 4MB ROM (128 banks x 32KB each)
# This config defines 8 banks (256KB) - extend as needed
#
# LoROM Bank Mapping:
#   Bank $00: $8000-$FFFF -> ROM offset $000000-$007FFF
#   Bank $01: $8000-$FFFF -> ROM offset $008000-$00FFFF
#   Bank $02: $8000-$FFFF -> ROM offset $010000-$017FFF
#   ... and so on
#
# Usage:
#   Place code/data in BANK0_CODE, BANK1_CODE, etc.
#   Use JSL for cross-bank calls, JMP (addr) for same-bank

MEMORY {
    # Zero Page
    ZP:      start = $00,    size = $100,   type = rw;

    # Low RAM
    LORAM:   start = $0100,  size = $1F00,  type = rw;

    # Bank 0: Main code bank with vectors
    ROM0:    start = $008000, size = $7FB0, type = ro, file = %O, fill = yes, bank = $00;
    HEADER:  start = $00FFB0, size = $30,   type = ro, file = %O, fill = yes;
    VECTORS: start = $00FFE0, size = $20,   type = ro, file = %O, fill = yes;

    # Bank 1: Additional code/data
    ROM1:    start = $018000, size = $8000, type = ro, file = %O, fill = yes, bank = $01;

    # Bank 2: Additional code/data
    ROM2:    start = $028000, size = $8000, type = ro, file = %O, fill = yes, bank = $02;

    # Bank 3: Additional code/data
    ROM3:    start = $038000, size = $8000, type = ro, file = %O, fill = yes, bank = $03;

    # Bank 4: Additional code/data
    ROM4:    start = $048000, size = $8000, type = ro, file = %O, fill = yes, bank = $04;

    # Bank 5: Additional code/data
    ROM5:    start = $058000, size = $8000, type = ro, file = %O, fill = yes, bank = $05;

    # Bank 6: Additional code/data
    ROM6:    start = $068000, size = $8000, type = ro, file = %O, fill = yes, bank = $06;

    # Bank 7: Additional code/data
    ROM7:    start = $078000, size = $8000, type = ro, file = %O, fill = yes, bank = $07;
}

SEGMENTS {
    # RAM segments
    ZEROPAGE: load = ZP,      type = zp;
    BSS:      load = LORAM,   type = bss;

    # Bank 0: Main code
    STARTUP:  load = ROM0,    type = ro,  align = $100;
    CODE:     load = ROM0,    type = ro;
    RODATA:   load = ROM0,    type = ro;
    DATA:     load = ROM0,    type = ro;

    # Header and vectors
    HEADER:   load = HEADER,  type = ro;
    VECTORS:  load = VECTORS, type = ro;

    # Additional banks for large projects
    # Use: .segment "BANK1_CODE" in assembly
    # 'optional = yes' suppresses warnings when segments are unused
    BANK1_CODE:   load = ROM1, type = ro, optional = yes;
    BANK1_RODATA: load = ROM1, type = ro, optional = yes;

    BANK2_CODE:   load = ROM2, type = ro, optional = yes;
    BANK2_RODATA: load = ROM2, type = ro, optional = yes;

    BANK3_CODE:   load = ROM3, type = ro, optional = yes;
    BANK3_RODATA: load = ROM3, type = ro, optional = yes;

    BANK4_CODE:   load = ROM4, type = ro, optional = yes;
    BANK4_RODATA: load = ROM4, type = ro, optional = yes;

    BANK5_CODE:   load = ROM5, type = ro, optional = yes;
    BANK5_RODATA: load = ROM5, type = ro, optional = yes;

    BANK6_CODE:   load = ROM6, type = ro, optional = yes;
    BANK6_RODATA: load = ROM6, type = ro, optional = yes;

    BANK7_CODE:   load = ROM7, type = ro, optional = yes;
    BANK7_RODATA: load = ROM7, type = ro, optional = yes;
}

SYMBOLS {
    __STACK_START__: type = export, value = $1FFF;

    # Bank numbers for cross-bank calls
    __BANK0__: type = export, value = $00;
    __BANK1__: type = export, value = $01;
    __BANK2__: type = export, value = $02;
    __BANK3__: type = export, value = $03;
    __BANK4__: type = export, value = $04;
    __BANK5__: type = export, value = $05;
    __BANK6__: type = export, value = $06;
    __BANK7__: type = export, value = $07;
}
